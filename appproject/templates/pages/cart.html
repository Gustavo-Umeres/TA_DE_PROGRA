{% extends 'base.html' %}

{% block content %}
<h1>Tu Carrito</h1>

{% if cart_items %}
<table>
    <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Total por Producto</th>
    </tr>
    {% for item in cart_items %}
    <tr>
        <td>{{ item.product.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>S/{{ item.product.price|floatformat:2 }}</td>
        <td>S/{{ item.total_price|floatformat:2 }}</td> <!-- Usamos el total calculado en la vista -->
    </tr>
    {% endfor %}
</table>

<p><strong>Precio Total:</strong> S/{{ total_price|floatformat:2 }}</p>
<a href="{% url 'checkout' %}">Ir al Checkout</a>

{% else %}
<p>Tu carrito está vacío.</p>
<a href="{% url 'products_list' %}">Ver productos</a>
{% endif %}
{% endblock %}
